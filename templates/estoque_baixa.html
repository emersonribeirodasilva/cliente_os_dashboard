<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estoque - Baixa (Descartes)</title>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

<style>
  body {
    background-color: #f7f9fc;
  }

  .page-title {
    font-weight: 600;
    font-size: 1.5rem;
    color: #2c3e50;
  }

  .table-responsive {
    max-height: 450px;
    overflow-y: auto;
    background: white;
    border-radius: 8px;
  }

  thead th {
    position: sticky;
    top: 0;
    background: #2c3e50;
    color: white;
    z-index: 2;
    font-size: 14px;
  }

  .search-box {
    max-width: 350px;
  }
</style>
</head>

<body>
<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="page-title">Estoque de Baixa (Descartes)</h3>

    <a href="{{ url_for('lista_equipamentos') }}" class="btn btn-secondary">‚¨Ö Voltar</a>
  </div>

  <!-- üîé Barra de pesquisa -->
  <div class="input-group mb-3 search-box">
    <input type="text" id="searchInput" class="form-control" placeholder="Pesquisar modelo, marca, status...">
    <div class="input-group-append">
      <span class="input-group-text">üîç</span>
    </div>
  </div>

  <!-- üì¶ Tabela -->
  <div class="table-responsive shadow">
    <table class="table table-striped table-bordered mb-0" id="baixaTable">
      <thead>
        <tr>
          <th>ID Baixa</th>
          <th>ID Equipamento</th>
          <th>Modelo</th>
          <th>Marca</th>
          <th>Idade (anos)</th>
          <th>Descri√ß√£o</th>
          <th>Status</th>
          <th>Data da Baixa</th>
          <th>A√ß√µes</th>
        </tr>
      </thead>
      <tbody>
        {% for b in baixas %}
        <tr>
          <td>{{ b['baixa_id'] }}</td>
          <td>{{ b['equipamento_id'] }}</td>
          <td>{{ b['modelo'] }}</td>
          <td>{{ b['marca'] }}</td>
          <td>{{ b['idade'] if b['idade'] is not none else '' }}</td>
          <td>{{ b['descricao'] }}</td>
          <td>{{ b['status'] }}</td>
          <td>{{ b['data_baixa'] }}</td>
          <td>
            <a href="{{ url_for('editar_equipamento', equip_id=b['equipamento_id']) }}" class="btn btn-sm btn-primary">
              Editar
            </a>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="9" class="text-center">Nenhum equipamento em baixa.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- Script filtro -->
<script>
document.getElementById('searchInput').addEventListener('keyup', function () {
  let filter = this.value.toLowerCase();
  let rows = document.querySelectorAll("#baixaTable tbody tr");

  rows.forEach(row => {
      let text = row.innerText.toLowerCase();
      row.style.display = text.includes(filter) ? "" : "none";
  });
});
</script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
