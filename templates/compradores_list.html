<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Empresas Compradoras</title>

  <!-- Bootstrap -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background-color: #f7f9fc;
    }

    .page-title {
      font-weight: 600;
      font-size: 1.5rem;
      color: #2c3e50;
    }

    /* Estilo tabela fixando cabeÃ§alho */
    .table-responsive {
      max-height: 450px;
      overflow-y: auto;
      border-radius: 8px;
      background: white;
    }

    thead th {
      position: sticky;
      top: 0;
      background: #2c3e50;
      color: white;
      z-index: 2;
    }

    .search-box {
      max-width: 350px;
    }
  </style>
</head>

<body>
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="page-title">Empresas Compradoras</h3>

    <a href="{{ url_for('suporte_dashboard') }}" class="btn btn-secondary">
      â¬… Voltar
    </a>
  </div>

  <!-- Barra de busca -->
  <div class="input-group mb-3 search-box">
    <input type="text" id="searchInput" class="form-control" placeholder="Pesquisar...">
    <div class="input-group-append">
      <span class="input-group-text">ðŸ”Ž</span>
    </div>
  </div>

  <div class="table-responsive shadow">
    <table class="table table-striped table-bordered mb-0" id="compradoresTable">
      <thead>
        <tr>
          <th>ID</th><th>Nome</th><th>CNPJ</th><th>Contato</th>
          <th>E-mail</th><th>Telefone</th><th>EndereÃ§o</th>
          <th>Criado em</th><th>AÃ§Ãµes</th>
        </tr>
      </thead>
      <tbody>
        {% for c in compradores %}
        <tr>
          <td>{{ c['id'] }}</td>
          <td>{{ c['nome'] }}</td>
          <td>{{ c['cnpj'] }}</td>
          <td>{{ c['contato'] }}</td>
          <td>{{ c['email'] }}</td>
          <td>{{ c['telefone'] }}</td>
          <td>{{ c['endereco'] }}</td>
          <td>{{ c['created_at'] }}</td>
          <td>
            <a href="{{ url_for('editar_comprador', comprador_id=c['id']) }}" class="btn btn-sm btn-primary">
              Editar
            </a>
          </td>
        </tr>
        {% else %}
        <tr><td colspan="9" class="text-center">Nenhum comprador cadastrado.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- Scripts -->
<script>
  // Filtro da tabela
  document.getElementById('searchInput').addEventListener('keyup', function () {
      let filter = this.value.toLowerCase();
      let rows = document.querySelectorAll("#compradoresTable tbody tr");

      rows.forEach(row => {
          let text = row.innerText.toLowerCase();
          row.style.display = text.includes(filter) ? "" : "none";
      });
  });
</script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
